<!DOCTYPE html>
<html lang="en-us">
  <head>
    <meta charset="UTF-8">
    <title>Java-OO by amelentev</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" type="text/css" href="stylesheets/normalize.css" media="screen">
    <link href='https://fonts.googleapis.com/css?family=Open+Sans:400,700' rel='stylesheet' type='text/css'>
    <link rel="stylesheet" type="text/css" href="stylesheets/stylesheet.css" media="screen">
    <link rel="stylesheet" type="text/css" href="stylesheets/github-light.css" media="screen">
  </head>
  <body>
    <section class="page-header">
      <h1 class="project-name">Java-OO</h1>
      <h2 class="project-tagline">Java Operator Overloading</h2>
      <a href="https://github.com/amelentev/java-oo" class="btn">View on GitHub</a>
      <a href="https://github.com/amelentev/java-oo/zipball/master" class="btn">Download .zip</a>
      <a href="https://github.com/amelentev/java-oo/tarball/master" class="btn">Download .tar.gz</a>
    </section>

    <section class="main-content">
      <h1>
<a id="java-operator-overloading" class="anchor" href="#java-operator-overloading" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Java Operator Overloading</h1>

<p>Java-OO is a modular extension (plugin) to Java compilers and IDEs
for (<a href="http://www.slideshare.net/joeygibson/operator-overloading-in-scala-2923973">Scala-like</a>) <a href="http://en.wikipedia.org/wiki/Operator_overloading">Operator Overloading</a> support.
Works with standard JavaC compiler, <a href="http://www.netbeans.org/">Netbeans IDE</a>, <a href="http://eclipse.org/">Eclipse IDE</a>, <a href="http://www.jetbrains.com/idea/">IntelliJ IDEA</a> IDE and any build tools.</p>

<p>Example (see other examples at <a href="https://github.com/amelentev/java-oo/tree/master/javac-oo-mvndemo/src/">examples/</a> dir):</p>

<div class="highlight highlight-source-java"><pre><span class="pl-k">import</span> <span class="pl-smi">java.math.*</span>;
<span class="pl-k">import</span> <span class="pl-smi">java.util.*</span>;
<span class="pl-k">public</span> <span class="pl-k">class</span> <span class="pl-en">Test</span> {
  <span class="pl-k">public</span> <span class="pl-k">static</span> <span class="pl-k">void</span> <span class="pl-en">main</span>(<span class="pl-k">String</span>[] <span class="pl-v">args</span>) {
    <span class="pl-smi">BigInteger</span> a <span class="pl-k">=</span> <span class="pl-smi">BigInteger</span><span class="pl-k">.</span>valueOf(<span class="pl-c1">1</span>), <span class="pl-c">// without OO</span>
               b <span class="pl-k">=</span> <span class="pl-c1">2</span>, <span class="pl-c">// with OO</span>

    c1 <span class="pl-k">=</span> a<span class="pl-k">.</span>negate()<span class="pl-k">.</span>add(b<span class="pl-k">.</span>multiply(b))<span class="pl-k">.</span>add(b<span class="pl-k">.</span>divide(a)), <span class="pl-c">// without OO</span>
    c2 <span class="pl-k">=</span> <span class="pl-k">-</span>a <span class="pl-k">+</span> b<span class="pl-k">*</span>b <span class="pl-k">+</span> b<span class="pl-k">/</span>a; <span class="pl-c">// with OO</span>

    <span class="pl-k">if</span> (c1<span class="pl-k">.</span>compareTo(c2)<span class="pl-k">&lt;</span><span class="pl-c1">0</span> <span class="pl-k">||</span> c1<span class="pl-k">.</span>compareTo(c2)<span class="pl-k">&gt;</span><span class="pl-c1">0</span>) <span class="pl-c">// without OO</span>
      <span class="pl-smi">System</span><span class="pl-k">.</span>out<span class="pl-k">.</span>println(<span class="pl-s"><span class="pl-pds">"</span>impossible<span class="pl-pds">"</span></span>);
    <span class="pl-k">if</span> (c1<span class="pl-k">&lt;</span>c2 <span class="pl-k">||</span> c1<span class="pl-k">&gt;</span>c2) <span class="pl-c">// with OO</span>
      <span class="pl-smi">System</span><span class="pl-k">.</span>out<span class="pl-k">.</span>println(<span class="pl-s"><span class="pl-pds">"</span>impossible<span class="pl-pds">"</span></span>);

    <span class="pl-k">HashMap&lt;<span class="pl-smi">String</span>, <span class="pl-smi">String</span>&gt;</span> map <span class="pl-k">=</span> <span class="pl-k">new</span> <span class="pl-k">HashMap&lt;&gt;</span>();
    <span class="pl-k">if</span> (<span class="pl-k">!</span>map<span class="pl-k">.</span>containsKey(<span class="pl-s"><span class="pl-pds">"</span>qwe<span class="pl-pds">"</span></span>)) map<span class="pl-k">.</span>put(<span class="pl-s"><span class="pl-pds">"</span>qwe<span class="pl-pds">"</span></span>, map<span class="pl-k">.</span>get(<span class="pl-s"><span class="pl-pds">"</span>asd<span class="pl-pds">"</span></span>)); <span class="pl-c">// without OO</span>
    <span class="pl-k">if</span> (map[<span class="pl-s"><span class="pl-pds">"</span>qwe<span class="pl-pds">"</span></span>]<span class="pl-k">==</span><span class="pl-c1">null</span>) map[<span class="pl-s"><span class="pl-pds">"</span>qwe<span class="pl-pds">"</span></span>] <span class="pl-k">=</span> map[<span class="pl-s"><span class="pl-pds">"</span>asd<span class="pl-pds">"</span></span>]; <span class="pl-c">// with OO</span>
  }
}</pre></div>

<h1>
<a id="versions" class="anchor" href="#versions" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Versions</h1>

<pre><code>JavaC/Netbeans: 0.5
JavaC8:         0.5
Eclipse:        0.5
IntelliJ IDEA:  0.5
</code></pre>

<p>Note plugin versions are independent. If version for X &gt; version for Y then it doesn't mean Y is behind feature wise.</p>

<h1>
<a id="news" class="anchor" href="#news" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>News</h1>

<p>14 July 2016. As a workaround <a href="#Eclipse">Eclipse plugin</a> works fine on Eclipse 4.4+ if you install <a href="http://scala-ide.org/download/current.html">Scala IDE</a> plugin first.</p>

<p>2 Feb 2016. <a href="#IDEA">IntelliJ IDEA</a> plugin v0.5 released with support of IDEA 15. Requires Java8 to run the plugin.</p>

<p>10 April 2015. <a href="#IDEA">IntelliJ IDEA</a> plugin v0.4.1 released with support of IDEA 14.1.</p>

<p>27 January 2015. Eclipse-oo-plugin version 0.5 released with support of <a href="https://github.com/amelentev/java-oo/issues/25">reverse binary operator overload</a>.</p>

<p>2 December 2014. New feature: <a href="https://github.com/amelentev/java-oo/issues/25">Reverse binary operator overload via <code>operatorRev</code> methods</a>.<br>
Plugin versions updated: <br>
<a href="#javac">JavaC7 &amp; JavaC8</a>: 0.5 <br>
<a href="#IDEA">IntelliJ IDEA</a>: 0.4. Support of IDEA 14</p>

<p>31 May 2014. Javac8 plugin version 0.1.1 released. Removed runtime depencendy on nbjavac.</p>

<p>24 May 2014. <a href="#IDEA">IntelliJ IDEA</a> plugin v0.3.1 released. Bugfixes for IDEA 13 Ultimate and for type resolution for binary expressions with primitives.</p>

<p>30 April 2014. <a href="http://airccse.org/journal/ijpla/current2014.html#apr">IJPLA</a> published a <a href="https://github.com/amelentev/java-oo/raw/master/doc/ijpla.pdf">paper</a> about Java-OO.</p>

<p>3 Feb 2014. New JavaC8 plugin version 0.1 for JDK8 was released.
It has the same features as JavaC plugin for JDK7 but doesn't work in Netbeans yet.</p>

<p>12 Jan 2014. JavaC plugin version 0.4 and Eclipse plugin version 0.4 released.
Now operator overloading perform autoboxing/autounboxing primitive to/from wrapper types where appropriate.
Fixed <a href="https://github.com/amelentev/java-oo/issues/13">javac plugin bug with index-set OO</a>.</p>

<p>3 Jan 2014. JavaC plugin version 0.3 released.
Fixed <a href="https://github.com/amelentev/java-oo/issues/10">#10 javac: binary operator adds erroneous cast on 1st operand</a>.</p>

<p>8 Sep 2013. Eclipse plugin version 0.3 released.
Removed copypasta from Eclipse Compiler. Plugin should be more steady agains compiler changes.</p>

<p>14 May 2013. <a href="#IDEA">IntelliJ IDEA</a> IDE plugin v0.2.1 with IDEA Ultimate Edition support.</p>

<p>17 Apr 2013. <a href="#IDEA">IntelliJ IDEA</a> IDE plugin v0.2.</p>

<p>26 Nov 2012. <a href="https://github.com/amelentev/java-oo/issues?milestone=1&amp;state=closed">Version 0.2</a> released. New feature: <a href="https://github.com/amelentev/java-oo/issues/4">Assignment operator overloading</a> via static <em>#valueOf</em> method.</p>

<h1>
<a id="installation" class="anchor" href="#installation" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Installation</h1>

<p><a name="javac"></a></p>

<h2>
<a id="javac-ant-etc" class="anchor" href="#javac-ant-etc" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>javac, ant, etc</h2>

<p>Just add to classpath: <a href="http://amelentev.github.io/mvnrepo/java-oo/javac-oo-plugin/0.5/javac-oo-plugin-0.5.jar">javac-oo-plugin.jar</a> for JDK7 or <a href="http://amelentev.github.io/mvnrepo/java-oo/javac8-oo-plugin/0.5/javac8-oo-plugin-0.5.jar">javac8-oo-plugin.jar</a> for JDK8.</p>

<pre><code>javac -cp javac-oo-plugin.jar &lt;sources&gt;
</code></pre>

<p>Demo at <a href="https://github.com/amelentev/java-oo/blob/master/javac-oo-mvndemo/src/compile.sh">examples/compile.sh</a></p>

<p><a name="Eclipse"></a></p>

<h2>
<a id="eclipse-ide-update-site" class="anchor" href="#eclipse-ide-update-site" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a><a href="http://eclipse.org/">Eclipse IDE</a> update site</h2>

<p>Click in menu: <code>Help - Install New Software</code>. Enter in <code>Work with</code> field:</p>

<pre><code>http://amelentev.github.io/eclipse.jdt-oo-site/
</code></pre>

<p>Tested on Eclipse Standard 4.3.2. Should work with older versions too. <br>
To work on 4.4+ you need to install <a href="http://scala-ide.org/download/current.html">Scala IDE</a> plugin (or similar plugin with Equanox weaving). You can find it in <code>Help -&gt; Eclipse Marketplace</code>. This is workaround until normal solution will be found. Tested on 4.4 and 4.6.</p>

<h2>
<a id="netbeans-ide" class="anchor" href="#netbeans-ide" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a><a href="http://www.netbeans.org/">Netbeans IDE</a>
</h2>

<ol>
<li>Add <a href="http://amelentev.github.io/mvnrepo/java-oo/javac-oo-plugin/0.5/javac-oo-plugin-0.5.jar">javac-oo-plugin.jar</a> as compile or processor library to Netbeans.</li>
<li>Enable "Annotation Processing in Editor": <code>Project Properties -&gt; Build -&gt; Compiling</code>.</li>
</ol>

<p>Tested on 7.2.1</p>

<p><a name="IDEA"></a></p>

<h2>
<a id="intellij-idea-ide" class="anchor" href="#intellij-idea-ide" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a><a href="http://www.jetbrains.com/idea/">IntelliJ IDEA</a> IDE</h2>

<ol>
<li>Install <a href="http://plugins.jetbrains.com/plugin?pr=&amp;pluginId=7224">Java Operator Overloading support</a> plugin: <code>File -&gt; Settings -&gt; Plugins -&gt; Browse repositories</code>. Mirror: <a href="http://amelentev.github.io/mvnrepo/java-oo/idea-oo-plugin/idea-oo-plugin-0.5.jar">idea-oo-plugin.jar</a>) <br>
For <a href="#maven">Maven projects</a> installation is done. IDEA should setup everything according to pom.xml. <br>
For other project types: <br>
</li>
<li>Add <a href="http://amelentev.github.io/mvnrepo/java-oo/javac-oo-plugin/0.5/javac-oo-plugin-0.5.jar">javac-oo-plugin.jar</a> as compile or processor library.</li>
<li>Enable Annotation Processing:
<code>Menu File -&gt; Settings -&gt; Compiler -&gt; Annotation Processing -&gt; Enable annotation processing</code>
</li>
<li>Make sure you use <code>javac</code> compiler in <code>Settings -&gt; Java Compiler -&gt; Use compiler</code>. <br>
Tested on IDEA 15.0.3 Community and Ultimate Editions.</li>
</ol>

<h3>
<a id="android-project-in-idea-12" class="anchor" href="#android-project-in-idea-12" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Android project in IDEA 12</h3>

<p>Add <a href="http://amelentev.github.io/mvnrepo/java-oo/javac-oo-plugin/0.5/javac-oo-plugin-0.5.jar">javac-oo-plugin.jar</a> to <code>File - Settings - Compiler - Annotation Processors - Processor path</code></p>

<h3>
<a id="android-studio-idea-13--gradle" class="anchor" href="#android-studio-idea-13--gradle" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Android Studio (IDEA 13) / Gradle</h3>

<p>add to <code>build.gradle</code>:</p>

<pre><code>repositories {
    maven { url 'http://amelentev.github.io/mvnrepo/' }
}
dependencies {
    compile 'java-oo:javac-oo-plugin:0.5'
}
</code></pre>

<p><a name="maven"></a></p>

<h2>
<a id="maven" class="anchor" href="#maven" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Maven</h2>

<p>Look at <a href="https://github.com/amelentev/java-oo/blob/master/javac-oo-mvndemo/pom.xml">javac-oo-mvndemo/pom.xml</a></p>

<h1>
<a id="details" class="anchor" href="#details" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Details</h1>

<p>Read the <a href="https://github.com/amelentev/java-oo/raw/master/doc/ijpla.pdf">paper</a> to learn more.
Supported operators (operator to method name map):</p>

<p>binary:</p>

<pre><code>| OPERATOR | METHOD NAME|
-------------------------
| +        | add        |
| -        | subtract   |
| *        | multiply   |
| /        | divide     |
| %        | remainder  |
| &amp;        | and        |
| |        | or         |
| ^        | xor        |
| &lt;&lt;       | shiftLeft  |
| &gt;&gt;       | shiftRight |
</code></pre>

<p>If left operand has no such method then the plugin will try to use <a href="https://github.com/amelentev/java-oo/issues/25">'reverse' method <code>&lt;methodName&gt;Rev</code></a> on right operand.
So <code>2*a</code> will be transformed to <code>a.multiplyRev(2)</code> if <code>a</code> has such method.</p>

<p>unary:</p>

<pre><code>| -        | negate     |
| ~        | not        |
</code></pre>

<p>comparison:</p>

<pre><code>| &lt;, &lt;=, &gt;, &gt;= | compareTo  | example: `a &lt; b` &lt;=&gt; `a.compareTo(b)&lt;0`
`==` and `!=` are not overloadable because it will break things
</code></pre>

<p>index:</p>

<pre><code>| []  | get       | `v = lst[i]` &lt;=&gt; `v = lst.get(i)`
| []= | set, put  | `map[s] = v` &lt;=&gt; `map.put(s,v)`,  `lst[i] = v` &lt;=&gt; `lst.set(i,v)`
</code></pre>

<p>assignment:</p>

<pre><code>| var = expr | var = VarClass.valueOf(expr) |
</code></pre>

<p>if <code>expr</code> is not assignable to <code>var</code> and <code>var</code> is an instance of <code>VarClass</code> and <code>expr</code> has type <code>ExprType</code> and there are static method <code>VarClass#valueOf(ExprType)</code> <br>
then <code>var = expr</code> is transformed to <code>var = VarClass.valueOf(expr)</code>.
example: <br>
<code>BigInteger a = 1</code> is transformed to <code>BigInteger a = BigInteger.valueOf(1)</code></p>

<p>These methods exists in many java classes (example: BigInteger, BigDecimal) so you can
use operators on them "out of the box". Or you can add these methods to your classes to use OO (see <a href="https://github.com/amelentev/java-oo/blob/master/javac-oo-mvndemo/src//Vector.java">examples/Vector.java</a>).</p>

<h2>
<a id="publications" class="anchor" href="#publications" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Publications</h2>

<p><a href="https://github.com/amelentev/java-oo/raw/master/doc/ijpla.pdf">"Java Modular Extension for Operator Overloading", IJPLA, April 2014.</a></p>

      <footer class="site-footer">
        <span class="site-footer-owner"><a href="https://github.com/amelentev/java-oo">Java-OO</a> is maintained by <a href="https://github.com/amelentev">amelentev</a>.</span>

        <span class="site-footer-credits">This page was generated by <a href="https://pages.github.com">GitHub Pages</a> using the <a href="https://github.com/jasonlong/cayman-theme">Cayman theme</a> by <a href="https://twitter.com/jasonlong">Jason Long</a>.</span>
      </footer>

    </section>

            <script type="text/javascript">
            var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
            document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
          </script>
          <script type="text/javascript">
            try {
              var pageTracker = _gat._getTracker("UA-31894853-1");
            pageTracker._trackPageview();
            } catch(err) {}
          </script>

  </body>
</html>
