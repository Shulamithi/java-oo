<!DOCTYPE html>
<html>

  <head>
    <meta charset='utf-8' />
    <meta http-equiv="X-UA-Compatible" content="chrome=1" />
    <meta name="description" content="Java-OO : Java Operator Overloading" />

    <link rel="stylesheet" type="text/css" media="screen" href="stylesheets/stylesheet.css">

    <title>Java-OO</title>
  </head>

  <body>

    <!-- HEADER -->
    <div id="header_wrap" class="outer">
        <header class="inner">
          <a id="forkme_banner" href="https://github.com/amelentev/java-oo">View on GitHub</a>

          <h1 id="project_title">Java-OO</h1>
          <h2 id="project_tagline">Java Operator Overloading</h2>

            <section id="downloads">
              <a class="zip_download_link" href="https://github.com/amelentev/java-oo/zipball/master">Download this project as a .zip file</a>
              <a class="tar_download_link" href="https://github.com/amelentev/java-oo/tarball/master">Download this project as a tar.gz file</a>
            </section>
        </header>
    </div>

    <!-- MAIN CONTENT -->
    <div id="main_content_wrap" class="outer">
      <section id="main_content" class="inner">
        <h1>
<a name="java-operator-overloading" class="anchor" href="#java-operator-overloading"><span class="octicon octicon-link"></span></a>Java Operator Overloading</h1>

<p>Java-OO is a modular extension (plugin) to Java compilers and IDEs
for (<a href="http://www.slideshare.net/joeygibson/operator-overloading-in-scala-2923973">Scala-like</a>) <a href="http://en.wikipedia.org/wiki/Operator_overloading">Operator Overloading</a> support.
Works with standard JavaC compiler, <a href="http://www.netbeans.org/">Netbeans IDE</a>, <a href="http://eclipse.org/">Eclipse IDE</a>, <a href="http://www.jetbrains.com/idea/">IntelliJ IDEA</a> IDE and any build tools.</p>

<p>Example (see other examples at <a href="https://github.com/amelentev/java-oo/tree/master/examples">examples/</a> dir):</p>

<div class="highlight highlight-java"><pre><span class="kn">import</span> <span class="nn">java.math.*</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.util.*</span><span class="o">;</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">Test</span> <span class="o">{</span>
  <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="n">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>
    <span class="n">BigInteger</span> <span class="n">a</span> <span class="o">=</span> <span class="n">BigInteger</span><span class="o">.</span><span class="na">valueOf</span><span class="o">(</span><span class="mi">1</span><span class="o">),</span> <span class="c1">// without OO</span>
               <span class="n">b</span> <span class="o">=</span> <span class="mi">2</span><span class="o">,</span> <span class="c1">// with OO</span>

    <span class="n">c1</span> <span class="o">=</span> <span class="n">a</span><span class="o">.</span><span class="na">negate</span><span class="o">().</span><span class="na">add</span><span class="o">(</span><span class="n">b</span><span class="o">.</span><span class="na">multiply</span><span class="o">(</span><span class="n">b</span><span class="o">)).</span><span class="na">add</span><span class="o">(</span><span class="n">b</span><span class="o">.</span><span class="na">divide</span><span class="o">(</span><span class="n">a</span><span class="o">)),</span> <span class="c1">// without OO</span>
    <span class="n">c2</span> <span class="o">=</span> <span class="o">-</span><span class="n">a</span> <span class="o">+</span> <span class="n">b</span><span class="o">*</span><span class="n">b</span> <span class="o">+</span> <span class="n">b</span><span class="o">/</span><span class="n">a</span><span class="o">;</span> <span class="c1">// with OO</span>

    <span class="k">if</span> <span class="o">(</span><span class="n">c1</span><span class="o">.</span><span class="na">compareTo</span><span class="o">(</span><span class="n">c2</span><span class="o">)&lt;</span><span class="mi">0</span> <span class="o">||</span> <span class="n">c1</span><span class="o">.</span><span class="na">compareTo</span><span class="o">(</span><span class="n">c2</span><span class="o">)&gt;</span><span class="mi">0</span><span class="o">)</span> <span class="c1">// without OO</span>
      <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"impossible"</span><span class="o">);</span>
    <span class="k">if</span> <span class="o">(</span><span class="n">c1</span><span class="o">&lt;</span><span class="n">c2</span> <span class="o">||</span> <span class="n">c1</span><span class="o">&gt;</span><span class="n">c2</span><span class="o">)</span> <span class="c1">// with OO</span>
      <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"impossible"</span><span class="o">);</span>

    <span class="n">HashMap</span><span class="o">&lt;</span><span class="n">String</span><span class="o">,</span> <span class="n">String</span><span class="o">&gt;</span> <span class="n">map</span> <span class="o">=</span> <span class="k">new</span> <span class="n">HashMap</span><span class="o">&lt;&gt;();</span>
    <span class="k">if</span> <span class="o">(!</span><span class="n">map</span><span class="o">.</span><span class="na">containsKey</span><span class="o">(</span><span class="s">"qwe"</span><span class="o">))</span> <span class="n">map</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="s">"qwe"</span><span class="o">,</span> <span class="n">map</span><span class="o">.</span><span class="na">get</span><span class="o">(</span><span class="s">"asd"</span><span class="o">));</span> <span class="c1">// without OO</span>
    <span class="k">if</span> <span class="o">(</span><span class="n">map</span><span class="o">[</span><span class="s">"qwe"</span><span class="o">]==</span><span class="kc">null</span><span class="o">)</span> <span class="n">map</span><span class="o">[</span><span class="s">"qwe"</span><span class="o">]</span> <span class="o">=</span> <span class="n">map</span><span class="o">[</span><span class="s">"asd"</span><span class="o">];</span> <span class="c1">// with OO</span>
  <span class="o">}</span>
<span class="o">}</span>
</pre></div>

<h1>
<a name="versions" class="anchor" href="#versions"><span class="octicon octicon-link"></span></a>Versions</h1>

<pre><code>JavaC/Netbeans: 0.4
JavaC8:         0.1.1
Eclipse:        0.4
IntelliJ IDEA:  0.3.1
</code></pre>

<h1>
<a name="news" class="anchor" href="#news"><span class="octicon octicon-link"></span></a>News</h1>

<p>31 May 2014. Javac8 plugin version 0.1.1 released. Removed runtime depencendy on nbjavac.</p>

<p>24 May 2014. <a href="#IDEA">IntelliJ IDEA</a> plugin v0.3.1 released. Bugfixes for IDEA 13 Ultimate and for type resolution for binary expressions with primitives.</p>

<p>30 April 2014. <a href="http://airccse.org/journal/ijpla/current2014.html#apr">IJPLA</a> published a <a href="https://github.com/amelentev/java-oo/raw/master/doc/ijpla.pdf">paper</a> about Java-OO.</p>

<p>3 Feb 2014. New JavaC8 plugin version 0.1 for JDK8 was released.
It has the same features as JavaC plugin for JDK7 but doesn't work in Netbeans yet.</p>

<p>12 Jan 2014. JavaC plugin version 0.4 and Eclipse plugin version 0.4 released.
Now operator overloading perform autoboxing/autounboxing primitive to/from wrapper types where appropriate.
Fixed <a href="https://github.com/amelentev/java-oo/issues/13">javac plugin bug with index-set OO</a>.</p>

<p>3 Jan 2014. JavaC plugin version 0.3 released.
Fixed <a href="https://github.com/amelentev/java-oo/issues/10">#10 javac: binary operator adds erroneous cast on 1st operand</a>.</p>

<p>8 Sep 2013. Eclipse plugin version 0.3 released.
Removed copypasta from Eclipse Compiler. Plugin should be more steady agains compiler changes.</p>

<p>14 May 2013. <a href="#IDEA">IntelliJ IDEA</a> IDE plugin v0.2.1 with IDEA Ultimate Edition support.</p>

<p>17 Apr 2013. <a href="#IDEA">IntelliJ IDEA</a> IDE plugin v0.2.</p>

<p>26 Nov 2012. <a href="https://github.com/amelentev/java-oo/issues?milestone=1&amp;state=closed">Version 0.2</a> released. New feature: <a href="https://github.com/amelentev/java-oo/issues/4">Assignment operator overloading</a> via static <em>#valueOf</em> method.</p>

<h1>
<a name="installation" class="anchor" href="#installation"><span class="octicon octicon-link"></span></a>Installation</h1>

<h2>
<a name="javac-ant-etc" class="anchor" href="#javac-ant-etc"><span class="octicon octicon-link"></span></a>javac, ant, etc</h2>

<p>Just add to classpath: <a href="http://amelentev.github.io/mvnrepo/java-oo/javac-oo-plugin/0.4/javac-oo-plugin-0.4.jar">javac-oo-plugin.jar</a> for JDK7 or <a href="http://amelentev.github.io/mvnrepo/java-oo/javac8-oo-plugin/0.1.1/javac8-oo-plugin-0.1.1.jar">javac8-oo-plugin.jar</a> for JDK8.</p>

<pre><code>javac -cp javac-oo-plugin.jar &lt;sources&gt;
</code></pre>

<p>Demo at <a href="https://github.com/amelentev/java-oo/blob/master/examples/compile.sh">examples/compile.sh</a></p>

<h2>
<a name="eclipse-ide-update-site" class="anchor" href="#eclipse-ide-update-site"><span class="octicon octicon-link"></span></a>
<a href="http://eclipse.org/">Eclipse IDE</a> update site</h2>

<p>Click in menu: <code>Help - Install New Software</code>. Enter in <code>Work with</code> field:</p>

<pre><code>http://amelentev.github.io/eclipse.jdt-oo-site/
</code></pre>

<p>Tested on Eclipse Standard 4.3.1. Should work with older/newer versions too.</p>

<h2>
<a name="netbeans-ide" class="anchor" href="#netbeans-ide"><span class="octicon octicon-link"></span></a><a href="http://www.netbeans.org/">Netbeans IDE</a>
</h2>

<ol>
<li>Add <a href="http://amelentev.github.io/mvnrepo/java-oo/javac-oo-plugin/0.4/javac-oo-plugin-0.4.jar">javac-oo-plugin.jar</a> as compile or processor library to Netbeans.</li>
<li>Enable "Annotation Processing in Editor": <code>Project Properties -&gt; Build -&gt; Compiling</code>.</li>
</ol><p>Tested on 7.2.1</p>

<p><a name="IDEA"></a></p>

<h2>
<a name="intellij-idea-ide" class="anchor" href="#intellij-idea-ide"><span class="octicon octicon-link"></span></a>
<a href="http://www.jetbrains.com/idea/">IntelliJ IDEA</a> IDE</h2>

<ol>
<li>Install <a href="http://plugins.jetbrains.com/plugin?pr=&amp;pluginId=7224">Java Operator Overloading support</a> plugin: <code>File -&gt; Settings -&gt; Plugins -&gt; Browse repositories</code>. Mirror: <a href="http://amelentev.github.io/mvnrepo/java-oo/idea-oo-plugin/idea-oo-plugin-0.3.1.jar">idea-oo-plugin.jar</a>) <br>
For <a href="#maven">Maven projects</a> installation is done. IDEA should setup everything according to pom.xml. <br>
For other project types: <br>
</li>
<li>Add <a href="http://amelentev.github.io/mvnrepo/java-oo/javac-oo-plugin/0.4/javac-oo-plugin-0.4.jar">javac-oo-plugin.jar</a> as compile or processor library.</li>
<li>Enable Annotation Processing:
<code>Menu File -&gt; Settings -&gt; Compiler -&gt; Annotation Processing -&gt; Enable annotation processing</code>
</li>
<li>Make sure you use <code>javac</code> compiler in <code>Settings -&gt; Java Compiler -&gt; Use compiler</code>. <br>
Tested on IDEA 12.1.3 Community and Ultimate Editions.</li>
</ol><h3>
<a name="android-project-in-idea-12" class="anchor" href="#android-project-in-idea-12"><span class="octicon octicon-link"></span></a>Android project in IDEA 12</h3>

<p>Add <a href="http://amelentev.github.io/mvnrepo/java-oo/javac-oo-plugin/0.4/javac-oo-plugin-0.4.jar">javac-oo-plugin.jar</a> to <code>File - Settings - Compiler - Annotation Processors - Processor path</code> </p>

<h3>
<a name="android-studio-idea-13--gradle" class="anchor" href="#android-studio-idea-13--gradle"><span class="octicon octicon-link"></span></a>Android Studio (IDEA 13) / Gradle</h3>

<p>add to <code>build.gradle</code>:</p>

<pre><code>repositories {
    maven { url 'http://amelentev.github.io/mvnrepo/' }
}
dependencies {
    compile 'java-oo:javac-oo-plugin:0.4'
}
</code></pre>

<p><a name="maven"></a></p>

<h2>
<a name="maven" class="anchor" href="#maven"><span class="octicon octicon-link"></span></a>Maven</h2>

<p>Look at <a href="https://github.com/amelentev/java-oo/blob/master/javac-oo-mvndemo/pom.xml">javac-oo-mvndemo/pom.xml</a></p>

<h1>
<a name="details" class="anchor" href="#details"><span class="octicon octicon-link"></span></a>Details</h1>

<p>Read the <a href="https://github.com/amelentev/java-oo/raw/master/doc/ijpla.pdf">paper</a> to learn more.
Supported operators (operator to method name map):</p>

<p>binary:</p>

<pre><code>| OPERATOR | METHOD NAME|
-------------------------
| +        | add        |
| -        | subtract   |
| *        | multiply   |
| /        | divide     |
| %        | remainder  |
| &amp;        | and        |
| |        | or         |
| ^        | xor        |
| &lt;&lt;       | shiftLeft  |
| &gt;&gt;       | shiftRight |
</code></pre>

<p>unary:</p>

<pre><code>| -        | negate     |
| ~        | not        |
</code></pre>

<p>comparison:</p>

<pre><code>| &lt;, &lt;=, &gt;, &gt;= | compareTo  | example: `a &lt; b` &lt;=&gt; `a.compareTo(b)&lt;0`
`==` and `!=` are not overloadable because it will break things
</code></pre>

<p>index:</p>

<pre><code>| []  | get       | `v = lst[i]` &lt;=&gt; `v = lst.get(i)`
| []= | set, put  | `map[s] = v` &lt;=&gt; `map.put(s,v)`,  `lst[i] = v` &lt;=&gt; `lst.set(i,v)`
</code></pre>

<p>assignment:</p>

<pre><code>| var = expr | var = VarClass.valueOf(expr) |
</code></pre>

<p>if <code>expr</code> is not assignable to <code>var</code> and <code>var</code> is an instance of <code>VarClass</code> and <code>expr</code> has type <code>ExprType</code> and there are static method <code>VarClass#valueOf(ExprType)</code> <br>
then <code>var = expr</code> is transformed to <code>var = VarClass.valueOf(expr)</code>.
example: <br><code>BigInteger a = 1</code> is transformed to <code>BigInteger a = BigInteger.valueOf(1)</code></p>

<p>These methods exists in many java classes (example: BigInteger, BigDecimal) so you can
use operators on them "out of the box". Or you can add these methods to your classes to use OO (see <a href="https://github.com/amelentev/java-oo/blob/master/examples/Vector.java">examples/Vector.java</a>).</p>

<h2>
<a name="publications" class="anchor" href="#publications"><span class="octicon octicon-link"></span></a>Publications</h2>

<p><a href="https://github.com/amelentev/java-oo/raw/master/doc/ijpla.pdf">"Java Modular Extension for Operator Overloading", IJPLA, April 2014.</a></p>
      </section>
    </div>

    <!-- FOOTER  -->
    <div id="footer_wrap" class="outer">
      <footer class="inner">
        <p class="copyright">Java-OO maintained by <a href="https://github.com/amelentev">amelentev</a></p>
        <p>Published with <a href="http://pages.github.com">GitHub Pages</a></p>
      </footer>
    </div>

              <script type="text/javascript">
            var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
            document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
          </script>
          <script type="text/javascript">
            try {
              var pageTracker = _gat._getTracker("UA-31894853-1");
            pageTracker._trackPageview();
            } catch(err) {}
          </script>


  </body>
</html>
